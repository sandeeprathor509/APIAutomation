orbs:
  maven: circleci/maven@1.3.0
version: 2.1
jobs:
  API-Automation:
    docker:
      - image: cimg/openjdk:11.0 
    steps:
      - run:
          working_directory: ~/freenow-auto/pom.xml
          name: perform maven
          command: mvn clean
      - checkout
    

dependencies:
  override:
    - mvn -DskipTests clean install dependency:resolve-plugins dependency:go-offline

test:
  override:
    - mvn -o surefire:test

deployment:
  main:
    branch: master
    commands:
      - mvn -s .circleci.settings.xml -DskipTests deploy

workflows:
  sample: 
    jobs:
      - API-Automation
